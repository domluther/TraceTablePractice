<!DOCTYPE html>
<html>
<head>
    <title>Array Test Verification</title>
</head>
<body>
    <h1>Array Test Verification</h1>
    <div id="results"></div>

    <script type="module">
        import { Interpreter } from './js/interpreter.js';

        const interpreter = new Interpreter();
        const results = document.getElementById('results');

        function log(message) {
            results.innerHTML += message + '<br>';
        }

        try {
            // Test array declaration with size
            log('Testing array declaration with size...');
            const result1 = interpreter.executeProgram(`array colours[3]
colours[0] = "Red"
colours[1] = "Blue"
colours[2] = "Green"`, { inputs: [] });

            log('✓ result1.variables: ' + JSON.stringify(result1.variables));
            log('✓ colours[0]: ' + interpreter.variables.colours[0]);
            log('✓ colours[1]: ' + interpreter.variables.colours[1]);
            log('✓ colours[2]: ' + interpreter.variables.colours[2]);

            // Test the specific assertions that were failing
            const hasColours0 = result1.variables.includes('colours[0]');
            const hasColours1 = result1.variables.includes('colours[1]');
            const hasColours2 = result1.variables.includes('colours[2]');
            
            log('✓ Variables includes colours[0]: ' + hasColours0);
            log('✓ Variables includes colours[1]: ' + hasColours1);
            log('✓ Variables includes colours[2]: ' + hasColours2);

            // Test array initialization with values
            log('<br>Testing array initialization with values...');
            const result2 = interpreter.executeProgram(`array scores = [85, 92, 78, 90]
highest = scores[1]`, { inputs: [] });

            log('✓ result2.variables: ' + JSON.stringify(result2.variables));
            log('✓ scores[0]: ' + interpreter.variables.scores[0]);
            log('✓ scores[1]: ' + interpreter.variables.scores[1]);
            log('✓ scores[2]: ' + interpreter.variables.scores[2]);
            log('✓ scores[3]: ' + interpreter.variables.scores[3]);
            log('✓ highest: ' + interpreter.variables.highest);

            log('<br><strong>All array functionality appears to be working correctly!</strong>');

        } catch (error) {
            log('❌ Error: ' + error.message);
            console.error(error);
        }
    </script>
</body>
</html>
