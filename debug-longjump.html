<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Long Jump Program</title>
</head>
<body>
    <h1>Debug Long Jump Program</h1>
    <div id="output"></div>

    <script type="module">
        import { Interpreter } from './js/interpreter.js';
        
        const interpreter = new Interpreter();
        const program = {
            inputs: ["2.5", "9"],
            randomValue: undefined
        };
        
        const code = `longJump = input("Enter distance")
yearGroup = input("Enter year group")
if longJump >= 5.0 then
    score = 3
elseif longJump >= 3.0 then
    score = 2
else
    score = 1
endif
if yearGroup != 10 then
    score = score * 2
endif
print("The score is", score)`;

        console.log("Running program with inputs:", program.inputs);
        
        const result = interpreter.executeProgram(code, program);
        
        console.log("Variables:", interpreter.variables);
        console.log("Outputs:", interpreter.outputs);
        console.log("Trace entries:");
        interpreter.trace.forEach((entry, index) => {
            console.log(`${index + 1}. Line ${entry.lineNumber}: Variables = ${JSON.stringify(entry.variables)}, Output = ${entry.output || 'none'}`);
        });
        
        console.log("Expected trace lines: 1, 2, 8, 11, 14");
        console.log("Actual trace lines:", interpreter.trace.map(t => t.lineNumber));
        
        const outputDiv = document.getElementById('output');
        outputDiv.innerHTML = `
            <h2>Program Execution Results</h2>
            <p><strong>Variables:</strong> ${JSON.stringify(interpreter.variables)}</p>
            <p><strong>Outputs:</strong> ${JSON.stringify(interpreter.outputs)}</p>
            <p><strong>Trace Lines:</strong> ${interpreter.trace.map(t => t.lineNumber).join(', ')}</p>
            <p><strong>Expected:</strong> 1, 2, 8, 11, 14</p>
        `;
    </script>
</body>
</html>
