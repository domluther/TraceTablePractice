<!DOCTYPE html>
<html>
<head>
    <title>Test Programs.js ASC/CHR Examples</title>
</head>
<body>
    <h1>Testing actual programs.js ASC/CHR usage</h1>
    <div id="output"></div>

    <script type="module">
        import { Interpreter } from './js/interpreter.js';
        
        const interpreter = new Interpreter();
        const output = document.getElementById('output');
        
        function log(message) {
            output.innerHTML += message + '<br>';
            console.log(message);
        }
        
        log("Testing programs.js ASC/CHR examples:");
        log("");
        
        // Test 1: Basic ASC/CHR demo from programs.js
        log("1. Testing: ASCII character conversion demo");
        try {
            const program1 = `letter = "A"
ascii_value = ASC(letter)
next_letter = CHR(ascii_value + 1)
print("ASCII value of " + letter + " is " + str(ascii_value))
print("Next letter is " + next_letter)`;
            
            const result1 = interpreter.executeProgram(program1, { inputs: [] });
            log(`   Variables: letter=${result1.variables.letter}, ascii_value=${result1.variables.ascii_value}, next_letter=${result1.variables.next_letter}`);
            log(`   Output: ${result1.outputs.join(', ')}`);
            log("   ✅ PASS - Basic ASC/CHR demo works");
        } catch (e) {
            log(`   ❌ FAIL - ${e.message}`);
        }
        log("");
        
        // Test 2: Character type checker from programs.js
        log("2. Testing: Character type checker using ASCII");
        try {
            const program2 = `char = "A"
code = ASC(char)
print("Character: " + char)
print("ASCII code: " + str(code))
if code >= 65 AND code <= 90 then
    print("It's an uppercase letter")
else
    print("It's not an uppercase letter")
endif`;
            
            const result2 = interpreter.executeProgram(program2, { inputs: [] });
            log(`   Variables: char=${result2.variables.char}, code=${result2.variables.code}`);
            log(`   Output: ${result2.outputs.join(', ')}`);
            log("   ✅ PASS - Character type checker works");
        } catch (e) {
            log(`   ❌ FAIL - ${e.message}`);
        }
        log("");
        
        // Test 3: Alphabet sequence generator from programs.js
        log("3. Testing: Alphabet sequence generator");
        try {
            const program3 = `start = ASC("A")
for i = 0 to 4
    letter = CHR(start + i)
    print(letter)
next i`;
            
            const result3 = interpreter.executeProgram(program3, { inputs: [] });
            log(`   Variables: start=${result3.variables.start}, i=${result3.variables.i}, letter=${result3.variables.letter}`);
            log(`   Output: ${result3.outputs.join(', ')}`);
            log("   ✅ PASS - Alphabet generator works");
        } catch (e) {
            log(`   ❌ FAIL - ${e.message}`);
        }
        log("");
        
        log("All programs.js ASC/CHR examples completed!");
    </script>
</body>
</html>
